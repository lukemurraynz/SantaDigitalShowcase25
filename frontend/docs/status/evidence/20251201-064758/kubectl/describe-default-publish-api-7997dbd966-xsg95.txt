Name:             default-publish-api-7997dbd966-xsg95
Namespace:        drasi-system
Priority:         0
Service Account:  default
Node:             aks-system-12296413-vmss000001/10.224.0.4
Start Time:       Mon, 01 Dec 2025 06:46:20 +1300
Labels:           dapr.io/app-id=default-publish-api
                  dapr.io/metrics-enabled=true
                  dapr.io/sidecar-injected=true
                  drasi/resource=default
                  drasi/service=publish-api
                  drasi/type=query-container
                  pod-template-hash=7997dbd966
Annotations:      dapr.io/app-id: default-publish-api
                  dapr.io/app-port: 4000
                  dapr.io/config: dapr-config
                  dapr.io/enabled: true
                  dapr.io/sidecar-image: daprio/daprd:1.9.0
Status:           Pending
IP:               10.224.0.22
IPs:
  IP:           10.224.0.22
Controlled By:  ReplicaSet/default-publish-api-7997dbd966
Containers:
  publish-api:
    Container ID:   
    Image:          drasi-project/query-container-publish-api:latest
    Image ID:       
    Port:           <none>
    Host Port:      <none>
    State:          Waiting
      Reason:       ErrImagePull
    Ready:          False
    Restart Count:  0
    Limits:
      cpu:     200m
      memory:  512Mi
    Requests:
      cpu:     50m
      memory:  128Mi
    Environment:
      INSTANCE_ID:     606bd0f1-bde9-4b65-918e-477af831341c
      QUERY_NODE_ID:   default
      DAPR_HTTP_PORT:  3500
      DAPR_GRPC_PORT:  50001
      APP_PROTOCOL:    http
    Mounts:
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-msrrl (ro)
  daprd:
    Container ID:  containerd://9162f528a3db67119e64a344dd7cd6161ada40d5b72cca18f0a35ce7ccf53097
    Image:         daprio/daprd:1.9.0
    Image ID:      docker.io/daprio/daprd@sha256:6118f141bcffbed599e1e6dea67df8d9fa7e5042078804abfe588366af38f2f4
    Ports:         3500/TCP (dapr-http), 50001/TCP (dapr-grpc), 50002/TCP (dapr-internal), 9090/TCP (dapr-metrics)
    Host Ports:    0/TCP (dapr-http), 0/TCP (dapr-grpc), 0/TCP (dapr-internal), 0/TCP (dapr-metrics)
    Args:
      /daprd
      --dapr-http-port
      3500
      --dapr-grpc-port
      50001
      --dapr-internal-grpc-port
      50002
      --dapr-listen-addresses
      [::1],127.0.0.1
      --dapr-public-port
      3501
      --app-id
      default-publish-api
      --app-protocol
      http
      --log-level
      info
      --dapr-graceful-shutdown-seconds
      -1
      --mode
      kubernetes
      --control-plane-address
      dapr-api.dapr-system.svc.cluster.local:443
      --sentry-address
      dapr-sentry.dapr-system.svc.cluster.local:443
      --app-port
      4000
      --enable-metrics
      --metrics-port
      9090
      --config
      dapr-config
      --placement-host-address
      dapr-placement-server.dapr-system.svc.cluster.local:50005
      --enable-mtls
    State:          Waiting
      Reason:       CrashLoopBackOff
    Last State:     Terminated
      Reason:       Error
      Exit Code:    1
      Started:      Mon, 01 Dec 2025 06:47:22 +1300
      Finished:     Mon, 01 Dec 2025 06:47:22 +1300
    Ready:          False
    Restart Count:  3
    Liveness:       http-get http://:3501/v1.0/healthz delay=3s timeout=3s period=6s #success=1 #failure=3
    Readiness:      http-get http://:3501/v1.0/healthz delay=3s timeout=3s period=6s #success=1 #failure=3
    Environment:
      NAMESPACE:                       drasi-system
      DAPR_TRUST_ANCHORS:              -----BEGIN CERTIFICATE-----
                                       MIIBcjCCARegAwIBAgIRAPEYBDsLsY7ZL6j1+mA2LCgwCgYIKoZIzj0EAwIwGDEW
                                       MBQGA1UEChMNY2x1c3Rlci5sb2NhbDAeFw0yNTExMzAxNzA2NTJaFw0yNjExMzAx
                                       NzIxNTJaMBgxFjAUBgNVBAoTDWNsdXN0ZXIubG9jYWwwWTATBgcqhkjOPQIBBggq
                                       hkjOPQMBBwNCAARUmcbky9QLvZAjIbHwOZ04pXKwOB5uZi8PnfZpwLVIur5K2wHX
                                       qPEXWJrWzRItrz6WC8c36iKN9IS5/mcqNXcbo0IwQDAOBgNVHQ8BAf8EBAMCAqQw
                                       DwYDVR0TAQH/BAUwAwEB/zAdBgNVHQ4EFgQUCKuOEXlb/q/MxBWm8WXXgxUQUgcw
                                       CgYIKoZIzj0EAwIDSQAwRgIhAP++NGgEnymEEGjo+2PHbfePZpp16nXlM1B5PkXV
                                       A1ywAiEAn/lhpiMyXEtQpxDdWvoctVt09clkLOZIWrTopuZS4qU=
                                       -----END CERTIFICATE-----
                                       
      POD_NAME:                        default-publish-api-7997dbd966-xsg95 (v1:metadata.name)
      DAPR_CONTROLPLANE_NAMESPACE:     dapr-system
      DAPR_CONTROLPLANE_TRUST_DOMAIN:  cluster.local
      DAPR_SCHEDULER_HOST_ADDRESS:     dapr-scheduler-server-0.dapr-scheduler-server.dapr-system.svc.cluster.local:50006
    Mounts:
      /var/run/secrets/dapr.io/sentrytoken from dapr-identity-token (ro)
      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-msrrl (ro)
Conditions:
  Type                        Status
  PodReadyToStartContainers   True 
  Initialized                 True 
  Ready                       False 
  ContainersReady             False 
  PodScheduled                True 
Volumes:
  kube-api-access-msrrl:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  3607
    ConfigMapName:           kube-root-ca.crt
    Optional:                false
    DownwardAPI:             true
  dapr-identity-token:
    Type:                    Projected (a volume that contains injected data from multiple sources)
    TokenExpirationSeconds:  7200
QoS Class:                   Burstable
Node-Selectors:              <none>
Tolerations:                 node.kubernetes.io/memory-pressure:NoSchedule op=Exists
                             node.kubernetes.io/not-ready:NoExecute op=Exists for 300s
                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s
Events:
  Type     Reason     Age                 From               Message
  ----     ------     ----                ----               -------
  Normal   Scheduled  99s                 default-scheduler  Successfully assigned drasi-system/default-publish-api-7997dbd966-xsg95 to aks-system-12296413-vmss000001
  Normal   Pulling    97s                 kubelet            Pulling image "daprio/daprd:1.9.0"
  Normal   Pulled     92s                 kubelet            Successfully pulled image "daprio/daprd:1.9.0" in 5.248s (5.248s including waiting). Image size: 38393280 bytes.
  Normal   Started    69s (x3 over 92s)   kubelet            Started container daprd
  Normal   Pulling    63s (x3 over 99s)   kubelet            Pulling image "drasi-project/query-container-publish-api:latest"
  Warning  Failed     61s (x3 over 97s)   kubelet            Failed to pull image "drasi-project/query-container-publish-api:latest": failed to pull and unpack image "docker.io/drasi-project/query-container-publish-api:latest": failed to resolve reference "docker.io/drasi-project/query-container-publish-api:latest": pull access denied, repository does not exist or may require authorization: server message: insufficient_scope: authorization failed
  Warning  Failed     61s (x3 over 97s)   kubelet            Error: ErrImagePull
  Warning  BackOff    49s (x8 over 89s)   kubelet            Back-off restarting failed container daprd in pod default-publish-api-7997dbd966-xsg95_drasi-system(09519167-60c6-4dc5-a6e5-0648bf5a4fbf)
  Normal   Created    37s (x4 over 92s)   kubelet            Created container: daprd
  Normal   BackOff    37s (x10 over 91s)  kubelet            Back-off pulling image "drasi-project/query-container-publish-api:latest"
  Normal   Pulled     37s (x3 over 90s)   kubelet            Container image "daprio/daprd:1.9.0" already present on machine
  Warning  Failed     36s (x11 over 91s)  kubelet            Error: ImagePullBackOff

